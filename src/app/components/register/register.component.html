<app-header />
<form [formGroup]="registerForm" (ngSubmit)="onSubmit(template)" class="mt-3">
  <div class="row">
    <!-- Coluna Esquerda: Dados do Solicitante -->
    <div class="col-md-6">
      <h3>Dados do solicitante</h3>
      <div class="mb-3">
        <label for="ds_responsavel" class="form-label"
          >Responsável pela empresa*</label
        >
        <input
          type="text"
          class="form-control"
          id="ds_responsavel"
          formControlName="ds_responsavel"
        />
        <div class="text-danger">
          {{ validationErrors["ds_responsavel"] }}
        </div>
      </div>
      <div class="mb-3">
        <label for="nu_cpf" class="form-label">CPF*</label>
        <input
          type="text"
          class="form-control"
          id="nu_cpf"
          formControlName="nu_cpf"
          placeholder="999.999.999-99"
          mask="000.000.000-00"
        />
        <div class="text-danger">
          {{ validationErrors["nu_cpf"] }}
        </div>
      </div>
      <div class="mb-3">
        <label for="date_nascimento" class="form-label">Data nascimento*</label>
        <input
          type="date"
          class="form-control"
          id="date_nascimento"
          formControlName="date_nascimento"
          placeholder="DD/MM/AAAA"
        />
        <div class="text-danger">
          {{ validationErrors["date_nascimento"] }}
        </div>
      </div>

      <h3>Dados da empresa</h3>
      <div class="mb-3">
        <label for="ds_nome_fantasia" class="form-label">Nome fantasia*</label>
        <input
          type="text"
          class="form-control"
          id="ds_nome_fantasia"
          formControlName="ds_nome_fantasia"
        />
        <div class="text-danger">
          {{ validationErrors["ds_nome_fantasia"] }}
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">Escolha sua entidade de registro*</label>
        <div class="form-check" *ngFor="let option of entidadeRegistroOptions">
          <input
            class="form-check-input"
            type="radio"
            name="co_entidade_registro"
            [id]="'company-type-' + option.key"
            [value]="option.key"
            formControlName="co_entidade_registro"
          />
          <label
            class="form-check-label"
            [for]="'company-type-' + option.key"
            >{{ option.value }}</label
          >
        </div>
        <div class="text-danger">
          {{ validationErrors["co_entidade_registro"] }}
        </div>
      </div>
    </div>

    <!-- Linha de Separação -->
    <div class="col-md-1 d-flex align-items-center">
      <div class="border-start border-primary border-3 h-100"></div>
    </div>

    <div class="col-md-5">
      <div class="mb-3">
        <h2>Endereço da empresa</h2>
        <label for="co_cep" class="form-label">CEP*</label>
        <input
          type="number"
          class="form-control"
          id="co_cep"
          formControlName="co_cep"
          placeholder="99999-999"
        />
        <div class="text-danger">
          {{ validationErrors["co_cep"] }}
        </div>
      </div>
      <div class="mb-3">
        <label for="ds_logradouro" class="form-label">Endereço*</label>
        <input
          type="text"
          class="form-control"
          id="ds_logradouro"
          formControlName="ds_logradouro"
        />
        <div class="text-danger">
          {{ validationErrors["ds_logradouro"] }}
        </div>
      </div>
      <div class="mb-3">
        <label for="ds_bairro" class="form-label">Bairro*</label>
        <input
          type="text"
          class="form-control"
          id="ds_bairro"
          formControlName="ds_bairro"
        />
        <div class="text-danger">
          {{ validationErrors["ds_bairro"] }}
        </div>
      </div>
      <div class="mb-3">
        <label for="ds_complemento" class="form-label">Complemento*</label>
        <input
          type="text"
          class="form-control"
          id="ds_complemento"
          formControlName="ds_complemento"
        />
      </div>

      <div class="mb-3">
        <label for="ds_municipio" class="form-label">Cidade*</label>
        <input
          type="text"
          class="form-control"
          id="ds_municipio"
          formControlName="ds_municipio"
        />
        <div class="text-danger">
          {{ validationErrors["ds_municipio"] }}
        </div>
      </div>
      <div class="mb-3">
        <label for="co_uf" class="form-label">Estado*</label>
        <select class="form-control" id="co_uf" formControlName="co_uf">
          <option value="">Selecione um estado</option>
          <option *ngFor="let estado of estados" [value]="estado.sigla">
            {{ estado.nome }}
          </option>
        </select>
        <div class="text-danger">
          {{ validationErrors["co_uf"] }}
        </div>
      </div>
      <div class="mb-3 text-end">
        <button type="submit" class="btn btn-primary mt-3">Enviar</button>
      </div>
    </div>
  </div>
</form>

<!-- Modal -->
<ng-template #template>
  <div class="modal-content rounded-3 border-0 shadow-sm">
    <div class="modal-header bg-white rounded-top p-3">
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="closeModalAndNavigate()"
      ></button>
    </div>
    <div class="modal-body p-5 text-center">
      <i class="bi bi-check-circle-fill text-success fs-1"></i>
      <p class="mb-0 text-dark mt-3">
        Sua solicitação foi cadastrada com sucesso!
      </p>
    </div>
  </div>
</ng-template>
